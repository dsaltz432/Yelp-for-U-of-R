
<!--
This page can only be accessed if the client's browser has a 'logged_in' localStorage key, created by signing in using a valid username and password
-->

<head>
<title>Yelp For U of R</title>

<!-- include jQuery, bootstrap, and MyStyles --> 
<script src="jquery-1.11.3.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="css/MyStyles.css">

<script type="text/javascript">
  // redirects page to login page if not logged in

    if (!localStorage['logged_in']){
      window.location = "/";
    } 

  $(document).ready(function() {

    // writing hello message to screen
    $("#hello").html("Hello, " + localStorage['logged_in']);

    // putting in string on Sign out button
    $("#logout").html("Sign out of " + localStorage['logged_in']);

    // Sign out button functionality
    $("#logout").click(function() {
      localStorage.removeItem('logged_in');
      window.location = "/";
    });

 $("#add").click(function() { // when add button is clicked
    $.ajax({
      url: "/places/", // REST principles
      type: "POST",
      dataType: "text", 
      data: {
        place: $("#addPlaceField").val(),
        username : localStorage['logged_in']
        },

      success: function(data) {
         $("#addPlaceField").val("");
         $("#outputOfPlace").html(data); 

      },
    });
  });
 });

</script>

</head>
  <body>
  <h1 id="title">Yelp for U of R</h1>

  <h2 id="hello"></h2>

  <p>
    <h3>Add new place visited: </h3>
    &nbsp; <input id="addPlaceField" type="text" size="20"/>
    <button id="add">Add</button>
  </p>

  <div id="outputOfPlace"></div>

  <button id="logout"></button>

  </body>
</html>
