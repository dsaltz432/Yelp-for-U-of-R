
<!--
This page can only be accessed if the client's browser has a 'logged_in' localStorage key, created by signing in using a valid username and password
-->

<head>
<title>Yelp For U of R</title>

<!-- include jQuery, bootstrap, and MyStyles --> 
<script src="jquery-1.11.3.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="css/MyStyles.css">

<script type="text/javascript">
  // redirects page to login page if not logged in

    if (!localStorage['logged_in']){
      window.location = "/";
    } 

  $(document).ready(function() {

    // writing hello message to screen
    $("#hello").html("Hello, " + localStorage['logged_in']);

    // putting in string on Sign out button
    $("#logout").html("Sign out of " + localStorage['logged_in']);

    // Sign out button functionality
    $("#logout").click(function() {
      localStorage.removeItem('logged_in');
      window.location = "/";
    });

 $("#add").click(function() { // when add button is clicked
    $.ajax({
      url: "/places/", // REST principles
      type: "POST",
      dataType: "text", 
      data: {
        place: $("#addPlaceField").val(),
        username : localStorage['logged_in'],
        rating: $("#rating").val(),
        cost: $("#cost").val(),
        comment: $("#comment").val()
        },

      success: function(data) {
         $("#addPlaceField").val("");
         $("#rating").val("");
         $("#cost").val("");
         $("#comment").val("");
         $("#outputOfPlace").html(data); 

      },
    });
  });
 });

</script>

</head>
  <body>
  <h1 id="title">Yelp for U of R</h1>

  <h2 id="hello"></h2>

  <p>
    <h4>Add A New Place: </h4>

    Name: <br />
    &nbsp; <input id="addPlaceField" type="text" size="20"/>

    <br /> <br />
    Rating out of 5 stars: <br />
    <select id="rating">
      <option value="1star">1 Star</option>
      <option value="2star">2 Stars</option>
      <option value="3star">3 Stars</option>
      <option value="4star">4 Stars</option>
      <option value="5star">5 Stars</option>
    </select>

    <br /> <br />
    Cost: <br />
    <select id="cost">
      <option value="1$">$</option>
      <option value="2$">$$</option>
      <option value="3$">$$$</option>
      <option value="4$">$$$$</option>
    </select>

    <br /> <br />
    Comment: <br />
    &nbsp; <textarea id="comment" type="text" style="width: 350px; height:100px"> </textarea> <br />
    <button id="add">Add New Place</button>
  </p>



  <div id="outputOfPlace"></div>

  <button id="logout"></button>

  </body>
</html>
